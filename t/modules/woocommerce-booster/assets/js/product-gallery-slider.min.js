jQuery(document).ready(function(w){var t=function(e,r){this.$target=w(e);var o=(r=w.extend({},OneCoreCustomizer_JS.wc_product_gallery,r)).enable_slider;r.slider=w.extend({},OneCoreCustomizer_JS.wc_product_gallery.slider,r.slider),r.thumbs=w.extend({},OneCoreCustomizer_JS.wc_product_gallery.thumbs,r.thumbs);var a=w(".woocommerce-product-gallery__wrapper",this.$target),t=".woocommerce-product-gallery__image",l=w(t,a);l.length||(l=w(t=".wc-gallery-item",a));var c=a.clone(),n=r.show_thumbs;if(l.length<=1&&(n=!1),o){var i=r.vertical;n&&(c.removeClass("woocommerce-product-gallery__wrapper").addClass("wc-nav-thumbs"),w(".woocommerce-product-gallery__image img",c).unwrap(),c.insertAfter(a),i&&this.$target.addClass("wc-gallery-vertical")),i||this.$target.addClass("wc-gallery-horizontal")}var s=function(e){if(!r.enable_zoom)return!1;var i=a.width(),o=!1;w(e).each(function(e,t){if(w(t).find("img").data("large_image_width")>i)return!(o=!0)}),o&&(zoom_options={touch:!1},"ontouchstart"in document.documentElement&&(zoom_options.on="click"),e.trigger("zoom.destroy"),e.zoom(zoom_options))},u=function(e,t){e.preventDefault();var i,r,o=w(".pswp")[0],c=(r=[],0<(i=l).length&&i.each(function(e,t){var i=w(t).find("img");if(i.length){var o={src:i.attr("data-large_image"),w:i.attr("data-large_image_width"),h:i.attr("data-large_image_height"),title:i.attr("data-caption")?i.attr("data-caption"):i.attr("title")};r.push(o)}}),r);void 0===t&&(t=a.slick("slickCurrentSlide"));var n=w.extend({index:t},wc_single_product_params?wc_single_product_params.photoswipe_options:{});new PhotoSwipe(o,PhotoSwipeUI_Default,c,n).init()},d=function(){if(!r.enable_lightbox)return!1;o?0<l.length?(a.prepend('<a href="#" class="woocommerce-product-gallery__trigger"><i class="wcicon-expand"></i></a>'),a.on("click",".woocommerce-product-gallery__trigger",u),a.on("click",".slick-slide",function(e){u(e)})):a.on("click",".woocommerce-product-gallery__image a",u):a.on("click",t,function(e){u(e,w(this).index())})};try{a.length&&a.slick("unslick"),c.length&&c.slick("unslick")}catch(e){}var _=w.extend({asNavFor:a,vertical:!1},r.thumbs);if(o){function g(e){if(r.auto_resize&&c.length){c.removeAttr("style");_.slidesToShow>l.length?l.length:_.slidesToShow;var t=80*_.slidesToShow;e?(t>=a.height()-20&&(t=""),c.css("min-height",t)):(t>=w(window).width()-20&&(t=""),c.css("width",t))}}a.bind("afterChange init",function(e,t,i,o){}),a.bind("init",function(e){w(document.body).trigger("wc_single_slider_init_done"),w(".slick-list .slick-slide",a).each(function(){s(w(this).find(".woocommerce-product-gallery__image"))}),d()}),g(i),c.bind("init reInit breakpoint afterChange",function(e){}),l.length&&a.slick(w.extend({asNavFor:!!n&&c},r.slider)),n&&c.slick(_);var m=this;if(n&&i){var h=function(){c.css("width",""),c.css("max-width",""),w(window).width()<=568?(m.$target.removeClass("wc-gallery-vertical"),c.slick("unslick"),g(!1),c.slick(w.extend(_,{vertical:!1}))):(m.$target.addClass("wc-gallery-vertical"),c.slick("unslick"),g(i),c.slick(w.extend(_,{vertical:!0})))};w(window).resize(function(){h()}),h()}}else w(t,a).each(function(){s(w(this))}),d();w(document).on("after_auto_render_css",function(e,t,i){a.find(".slick-list").height("auto"),o&&setTimeout(function(){a.slick("resize"),n&&c.slick("resize")},250)}),w(window).resize(function(){o&&setTimeout(function(){a.slick("resize"),n&&c.slick("resize")},250)})};w.fn.tophive_wc_product_gallery=function(e){return new t(this,e),this},void 0!==OneCoreCustomizer_JS.wc_product_gallery&&(w(".woocommerce-product-gallery").each(function(){w(this).tophive_wc_product_gallery()}),w(document).on("tophive_quickview_product_init",function(e,t){setTimeout(function(){w(".woocommerce-product-gallery",t).each(function(){OneCoreCustomizer_JS.wc_product_gallery_quick_view.enable_slider=!0,w(this).tophive_wc_product_gallery(OneCoreCustomizer_JS.wc_product_gallery_quick_view)})},500)}))});