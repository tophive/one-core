jQuery(document).ready(function(s){var n={setAttachment:function(t){this.attachment=t},addParamsURL:function(t,e){return s.isEmptyObject(e)||(t+=(0<=t.indexOf("?")?"&":"?")+s.param(e)),t},getThumb:function(t){void 0!==t&&(this.attachment=t);var e=(new Date).getTime();return void 0!==this.attachment.sizes&&void 0!==this.attachment.sizes.medium?this.addParamsURL(this.attachment.sizes.medium.url,{t:e}):this.addParamsURL(this.attachment.url,{t:e})},getURL:function(t){void 0!==t&&(this.attachment=t);var e=(new Date).getTime();return this.addParamsURL(this.attachment.url,{t:e})},getID:function(t){return void 0!==t&&(this.attachment=t),this.attachment.id},getInputID:function(t){s(".attachment-id",this.preview).val()},setPreview:function(t){this.preview=t},insertImage:function(t){void 0!==t&&(this.attachment=t);var e=this.getURL(),i=this.getID(),n=this.attachment.mime;s(".tophive-image-preview",this.preview).addClass("tophive--has-file").html('<img src="'+e+'" alt="">'),s(".attachment-url",this.preview).val(this.toRelativeUrl(e)),s(".attachment-mime",this.preview).val(n),s(".attachment-id",this.preview).val(i).trigger("change"),this.preview.addClass("attachment-added"),this.showChangeBtn()},toRelativeUrl:function(t){return t},showChangeBtn:function(){s(".tophive--add",this.preview).addClass("tophive--hide"),s(".tophive--change",this.preview).removeClass("tophive--hide"),s(".tophive--remove",this.preview).removeClass("tophive--hide")},insertVideo:function(t){void 0!==t&&(this.attachment=t);var e=this.getURL(),i=this.getID(),n=this.attachment.mime,a='<video width="100%" height="" controls><source src="'+e+'" type="'+n+'">Your browser does not support the video tag.</video>';s(".tophive-image-preview",this.preview).addClass("tophive--has-file").html(a),s(".attachment-url",this.preview).val(this.toRelativeUrl(e)),s(".attachment-mime",this.preview).val(n),s(".attachment-id",this.preview).val(i).trigger("change"),this.preview.addClass("attachment-added"),this.showChangeBtn()},insertFile:function(t){void 0!==t&&(this.attachment=t);var e=t.url;this.attachment.mime,e.replace(/^.*[\\\/]/,"");s(".attachment-url",this.preview).val(this.toRelativeUrl(e)),s(".attachment-id",this.preview).val(this.getID()).trigger("change")},remove:function(t){void 0!==t&&(this.preview=t),s(".attachment-url",this.preview).val(""),s(".attachment-id",this.preview).val("").trigger("change")},controlFont:{}};_.each(One_Fonts_Settings,function(e,t){n.controlFont[e.mime]=wp.media({library:{type:e.mime},title:e.modal,button:{},multiple:!1}),n.controlFont[e.mime].on("select",function(){var t=n.controlFont[e.mime].state().get("selection").first().toJSON();n.insertFile(t)})}),s(document.body).on("click",".font-upload-btn",function(t){t.preventDefault();var e=s(this).closest(".font-file-field"),i=s(this).attr("data-mime")||"";i&&(n.setPreview(e),n.controlFont[i].open())}),s(document.body).on("click",".font-add-variation",function(t){t.preventDefault();var e=s(this).closest(".inside"),i=s(".font-file-group",e).eq(0).clone();i.find(".font-file-input input").val(""),i.find("select option").removeAttr("selected"),i.find(".preview-text").removeAttr("style"),i.addClass("close"),s(".list-fonts",e).append(i)}),s(document.body).on("click",".font-edit, .font-close",function(t){t.preventDefault(),s(this).closest(".font-file-group").toggleClass("close")}),s(document.body).on("click",".font-remove",function(t){t.preventDefault();var e=s(this).closest(".list-fonts"),i=s(this).closest(".font-file-group");1<s(".font-file-group",e).length?i.remove():(i.find(".font-file-input input").val(""),i.find("select option").removeAttr("selected"),i.find(".preview-text").removeAttr("style"))})});